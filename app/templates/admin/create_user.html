{% extends "base.html" %}

{% block title %}ì‚¬ìš©ì ìƒì„± - ê´€ë¦¬ì{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-4">
        <div class="col">
            <h1>â• ìƒˆ ì‚¬ìš©ì ìƒì„±</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('admin.dashboard') }}">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</a></li>
                    <li class="breadcrumb-item"><a href="{{ url_for('admin.users') }}">ì‚¬ìš©ì ê´€ë¦¬</a></li>
                    <li class="breadcrumb-item active">ìƒˆ ì‚¬ìš©ì ìƒì„±</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3>ì‚¬ìš©ì ì •ë³´ ì…ë ¥</h3>
        </div>
        <div class="card-body">
            <form method="POST" data-validate>
                <!-- ê¸°ë³¸ ì •ë³´ -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="alert alert-info">
                            <strong>ğŸ’¡ ì •ë³´:</strong> ì´ì œ ì´ë©”ì¼ ì£¼ì†Œë§Œìœ¼ë¡œ ì‚¬ìš©ìë¥¼ ì¸ì¦í•©ë‹ˆë‹¤. 
                            Google IDëŠ” ì²« ë¡œê·¸ì¸ ì‹œ ìë™ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="email" class="form-label">ì´ë©”ì¼ ì£¼ì†Œ *</label>
                            <input type="email" class="form-control" id="email" name="email" required 
                                   placeholder="user@example.com">
                            <small class="form-text text-muted">ì´ ì´ë©”ì¼ë¡œ Google ë¡œê·¸ì¸ ì‹œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.</small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="name" class="form-label">ì´ë¦„ *</label>
                            <input type="text" class="form-control" id="name" name="name" required 
                                   placeholder="í™ê¸¸ë™">
                        </div>
                    </div>
                </div>

                
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="role" class="form-label">ì—­í•  *</label>
                            <select class="form-control" id="role" name="role" required onchange="toggleProfileFields()">
                                <option value="">ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="student">í•™ìƒ</option>
                                <option value="teacher">êµì‚¬</option>
                                <option value="admin">ê´€ë¦¬ì</option>
                                <option value="super_admin">ìµœê³ ê´€ë¦¬ì</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-check" style="margin-top: 2rem;">
                                <input type="checkbox" class="form-check-input" id="is_active" name="is_active" checked>
                                <label class="form-check-label" for="is_active">
                                    ê³„ì • í™œì„±í™”
                                </label>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- í•™ìƒ ì „ìš© í•„ë“œ -->
                <div id="student_fields" style="display: none;">
                    <h4 class="mt-4 mb-3">ğŸ“š í•™ìƒ ì •ë³´</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="student_id" class="form-label">í•™ë²ˆ</label>
                                <input type="text" class="form-control" id="student_id" name="student_id" 
                                       placeholder="2024001">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="grade" class="form-label">í•™ë…„</label>
                                <select class="form-control" id="grade" name="grade">
                                    {% for i in range(1, 13) %}
                                    <option value="{{ i }}">{{ i }}í•™ë…„</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="class_number" class="form-label">ë°˜</label>
                                <input type="number" class="form-control" id="class_number" name="class_number" 
                                       min="1" value="1">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="admission_year" class="form-label">ì…í•™ë…„ë„</label>
                                <input type="number" class="form-control" id="admission_year" name="admission_year" 
                                       min="1900" max="2030" value="2024">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="department" class="form-label">í•™ê³¼/ì „ê³µ</label>
                                <input type="text" class="form-control" id="department" name="department" 
                                       placeholder="ì»´í“¨í„°ê³¼í•™ê³¼">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="phone" class="form-label">ì—°ë½ì²˜</label>
                                <input type="text" class="form-control" id="phone" name="phone" 
                                       placeholder="010-0000-0000">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="parent_phone" class="form-label">ë³´í˜¸ì ì—°ë½ì²˜</label>
                                <input type="text" class="form-control" id="parent_phone" name="parent_phone" 
                                       placeholder="010-0000-0000">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- êµì‚¬ ì „ìš© í•„ë“œ -->
                <div id="teacher_fields" style="display: none;">
                    <h4 class="mt-4 mb-3">ğŸ‘©â€ğŸ« êµì‚¬ ì •ë³´</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="employee_id" class="form-label">ì§ì›ë²ˆí˜¸</label>
                                <input type="text" class="form-control" id="employee_id" name="employee_id" 
                                       placeholder="T2024001">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="subject" class="form-label">ë‹´ë‹¹êµê³¼</label>
                                <input type="text" class="form-control" id="subject" name="subject" 
                                       placeholder="ìˆ˜í•™">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="responsibility" class="form-label">ë‹´ë‹¹ì—…ë¬´</label>
                                <input type="text" class="form-control" id="responsibility" name="responsibility" 
                                       placeholder="3í•™ë…„ ë‹´ì„">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="position" class="form-label">ì§ìœ„</label>
                                <select class="form-control" id="position" name="position">
                                    <option value="">ì§ìœ„ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                                    <option value="êµì‚¬">êµì‚¬</option>
                                    <option value="ë¶€ì¥êµì‚¬">ë¶€ì¥êµì‚¬</option>
                                    <option value="êµê°">êµê°</option>
                                    <option value="êµì¥">êµì¥</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="office_location" class="form-label">ì‚¬ë¬´ì‹¤ ìœ„ì¹˜</label>
                                <input type="text" class="form-control" id="office_location" name="office_location" 
                                       placeholder="ë³¸ê´€ 3ì¸µ êµë¬´ì‹¤">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="teacher_phone" class="form-label">ì—°ë½ì²˜</label>
                                <input type="text" class="form-control" id="teacher_phone" name="phone" 
                                       placeholder="010-0000-0000">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë²„íŠ¼ -->
                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-primary">
                        âœ… ì‚¬ìš©ì ìƒì„±
                    </button>
                    <a href="{{ url_for('admin.users') }}" class="btn btn-secondary">
                        âŒ ì·¨ì†Œ
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
function toggleProfileFields() {
    const role = document.getElementById('role').value;
    const studentFields = document.getElementById('student_fields');
    const teacherFields = document.getElementById('teacher_fields');
    
    // ëª¨ë“  í”„ë¡œí•„ í•„ë“œ ìˆ¨ê¹€
    studentFields.style.display = 'none';
    teacherFields.style.display = 'none';
    
    // ì„ íƒëœ ì—­í• ì— ë”°ë¼ í•´ë‹¹ í•„ë“œ í‘œì‹œ
    if (role === 'student') {
        studentFields.style.display = 'block';
    } else if (role === 'teacher') {
        teacherFields.style.display = 'block';
    }
}
</script>

<style>
.breadcrumb {
    background-color: transparent;
    padding: 0;
}

.form-group {
    margin-bottom: 1rem;
}

.card {
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

h4 {
    color: #4285f4;
    border-bottom: 2px solid #e8f0fe;
    padding-bottom: 0.5rem;
}
</style>
{% endblock %}